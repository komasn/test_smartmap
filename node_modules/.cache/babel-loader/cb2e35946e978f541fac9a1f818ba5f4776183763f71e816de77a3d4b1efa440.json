{"ast":null,"code":"import _slicedToArray from\"/home/magari/git/test_smartmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import Header from'./Header';import Sidebar from'./Sidebar';import MainMap from'./MainMap';// import type * as maplibregl from 'maplibre-gl';\nimport'./App.scss';import{useQuery}from'react-query';import{getCatalog}from'./api/catalog';import SidebarDetail from'./SidebarDetail';import{useMediaQuery}from'react-responsive';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var catalog=useQuery('catalog',getCatalog);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),selectedLayers=_useState2[0],setSelectedLayers=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedFeatures=_useState4[0],setSelectedFeatures=_useState4[1];// TODO: https://github.com/takamatsu-city/maps.takamatsu-fact.com/issues/89 修正時に 初期値を true に変更する\nvar isDesktop=useMediaQuery({query:'(min-width: 769px)'});var _useState5=useState(isDesktop),_useState6=_slicedToArray(_useState5,2),isOpenedSidebar=_useState6[0],setIsOpenedSidebar=_useState6[1];var catalogSuccess=catalog.isSuccess;var catalogData=catalog.data;useEffect(function(){if(!catalogSuccess||!catalogData){return;}// setSelectedLayers(catalogData.map(item => item.class));\n},[catalogSuccess,catalogData,setSelectedLayers]);// useEffect(() => {\n//   console.log(selectedLayers);\n// }, [selectedLayers]);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Sidebar,{catalogData:catalog.data||[],selectedLayers:selectedLayers,isOpenedSidebar:isOpenedSidebar,setIsOpenedSidebar:setIsOpenedSidebar,setSelectedLayers:setSelectedLayers}),/*#__PURE__*/_jsxs(\"div\",{className:\"map-container\",children:[selectedFeatures.length>0&&/*#__PURE__*/_jsx(SidebarDetail,{selected:selectedFeatures,setSelected:setSelectedFeatures}),/*#__PURE__*/_jsx(MainMap,{catalogData:catalog.data||[],selectedLayers:selectedLayers,setSelectedFeatures:setSelectedFeatures})]})]})]});}export default App;","map":{"version":3,"names":["useEffect","useState","Header","Sidebar","MainMap","useQuery","getCatalog","SidebarDetail","useMediaQuery","jsx","_jsx","jsxs","_jsxs","App","catalog","_useState","_useState2","_slicedToArray","selectedLayers","setSelectedLayers","_useState3","_useState4","selectedFeatures","setSelectedFeatures","isDesktop","query","_useState5","_useState6","isOpenedSidebar","setIsOpenedSidebar","catalogSuccess","isSuccess","catalogData","data","className","children","length","selected","setSelected"],"sources":["/home/magari/git/test_smartmap/src/App.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport Header from './Header'\nimport Sidebar from './Sidebar'\nimport MainMap from './MainMap'\n\n// import type * as maplibregl from 'maplibre-gl';\n\nimport './App.scss';\nimport { useQuery } from 'react-query';\nimport { CatalogFeature, getCatalog } from './api/catalog';\nimport SidebarDetail from './SidebarDetail';\nimport { useMediaQuery } from 'react-responsive'\n\nfunction App() {\n  const catalog = useQuery('catalog', getCatalog);\n  const [selectedLayers, setSelectedLayers] = useState<string[]>([]);\n  const [selectedFeatures, setSelectedFeatures] = useState<CatalogFeature[]>([]);\n\n  // TODO: https://github.com/takamatsu-city/maps.takamatsu-fact.com/issues/89 修正時に 初期値を true に変更する\n  const isDesktop = useMediaQuery({ query: '(min-width: 769px)' })\n  const [isOpenedSidebar, setIsOpenedSidebar] = useState<boolean>(isDesktop);\n\n  const catalogSuccess = catalog.isSuccess;\n  const catalogData = catalog.data;\n  useEffect(() => {\n    if (!catalogSuccess || !catalogData) {\n      return;\n    }\n\n    // setSelectedLayers(catalogData.map(item => item.class));\n  }, [ catalogSuccess, catalogData, setSelectedLayers ]);\n\n  // useEffect(() => {\n  //   console.log(selectedLayers);\n  // }, [selectedLayers]);\n\n  return (\n    <div className=\"App\">\n      <Header />\n      <div className=\"container\">\n        <Sidebar\n          catalogData={catalog.data || []}\n          selectedLayers={selectedLayers}\n          isOpenedSidebar={isOpenedSidebar}\n          setIsOpenedSidebar={setIsOpenedSidebar}\n          setSelectedLayers={setSelectedLayers}\n        />\n        <div className=\"map-container\">\n          { selectedFeatures.length > 0 && <SidebarDetail\n            selected={selectedFeatures}\n            setSelected={setSelectedFeatures}\n          /> }\n          <MainMap\n            catalogData={catalog.data || []}\n            selectedLayers={selectedLayers}\n            setSelectedFeatures={setSelectedFeatures}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"oHAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,MAAO,CAAAC,OAAO,KAAM,WAAW,CAE/B;AAEA,MAAO,YAAY,CACnB,OAASC,QAAQ,KAAQ,aAAa,CACtC,OAAyBC,UAAU,KAAQ,eAAe,CAC1D,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C,OAASC,aAAa,KAAQ,kBAAkB,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEhD,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,GAAM,CAAAC,OAAO,CAAGT,QAAQ,CAAC,SAAS,CAAEC,UAAU,CAAC,CAC/C,IAAAS,SAAA,CAA4Cd,QAAQ,CAAW,EAAE,CAAC,CAAAe,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA3DG,cAAc,CAAAF,UAAA,IAAEG,iBAAiB,CAAAH,UAAA,IACxC,IAAAI,UAAA,CAAgDnB,QAAQ,CAAmB,EAAE,CAAC,CAAAoB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAvEE,gBAAgB,CAAAD,UAAA,IAAEE,mBAAmB,CAAAF,UAAA,IAE5C;AACA,GAAM,CAAAG,SAAS,CAAGhB,aAAa,CAAC,CAAEiB,KAAK,CAAE,oBAAqB,CAAC,CAAC,CAChE,IAAAC,UAAA,CAA8CzB,QAAQ,CAAUuB,SAAS,CAAC,CAAAG,UAAA,CAAAV,cAAA,CAAAS,UAAA,IAAnEE,eAAe,CAAAD,UAAA,IAAEE,kBAAkB,CAAAF,UAAA,IAE1C,GAAM,CAAAG,cAAc,CAAGhB,OAAO,CAACiB,SAAS,CACxC,GAAM,CAAAC,WAAW,CAAGlB,OAAO,CAACmB,IAAI,CAChCjC,SAAS,CAAC,UAAM,CACd,GAAI,CAAC8B,cAAc,EAAI,CAACE,WAAW,CAAE,CACnC,OACF,CAEA;AACF,CAAC,CAAE,CAAEF,cAAc,CAAEE,WAAW,CAAEb,iBAAiB,CAAE,CAAC,CAEtD;AACA;AACA;AAEA,mBACEP,KAAA,QAAKsB,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBzB,IAAA,CAACR,MAAM,GAAE,CAAC,cACVU,KAAA,QAAKsB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBzB,IAAA,CAACP,OAAO,EACN6B,WAAW,CAAElB,OAAO,CAACmB,IAAI,EAAI,EAAG,CAChCf,cAAc,CAAEA,cAAe,CAC/BU,eAAe,CAAEA,eAAgB,CACjCC,kBAAkB,CAAEA,kBAAmB,CACvCV,iBAAiB,CAAEA,iBAAkB,CACtC,CAAC,cACFP,KAAA,QAAKsB,SAAS,CAAC,eAAe,CAAAC,QAAA,EAC1Bb,gBAAgB,CAACc,MAAM,CAAG,CAAC,eAAI1B,IAAA,CAACH,aAAa,EAC7C8B,QAAQ,CAAEf,gBAAiB,CAC3BgB,WAAW,CAAEf,mBAAoB,CAClC,CAAC,cACFb,IAAA,CAACN,OAAO,EACN4B,WAAW,CAAElB,OAAO,CAACmB,IAAI,EAAI,EAAG,CAChCf,cAAc,CAAEA,cAAe,CAC/BK,mBAAmB,CAAEA,mBAAoB,CAC1C,CAAC,EACC,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAAV,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}