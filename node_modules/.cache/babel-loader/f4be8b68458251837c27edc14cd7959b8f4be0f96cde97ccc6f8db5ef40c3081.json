{"ast":null,"code":"var _jsxFileName = \"/home/magari/git/test_smartmap/src/SidebarDetail.tsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback } from 'react';\nimport { AiOutlineClose } from \"react-icons/ai\";\nimport './SidebarDetail.scss';\nimport ReplaceTextToLink from './utils/ReplaceTextToLink';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SingleFeatureTable = ({\n  feature\n}) => {\n  const detailItems = Object.entries(feature.properties).filter(([key, _value]) => !key.startsWith('_viewer_'));\n  detailItems.sort(([key1, _value1], [key2, _value2]) => {\n    // make sure items with key=`class` and key=`subclass` are always on top\n    if (key1 === 'class') return -1;\n    if (key2 === 'class') return 1;\n    if (key1 === 'subclass' && key2 !== 'class') return -1;\n    if (key2 === 'subclass' && key1 !== 'class') return 1;\n    return 0;\n  });\n  return /*#__PURE__*/_jsxDEV(\"table\", {\n    className: \"sidebar-detail-single-feature\",\n    children: [/*#__PURE__*/_jsxDEV(\"colgroup\", {\n      children: [/*#__PURE__*/_jsxDEV(\"col\", {\n        className: \"label\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n        className: \"content\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n      children: detailItems.map(([key, value]) => /*#__PURE__*/_jsxDEV(\"tr\", {\n        className: \"sidebar-detail-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n          className: \"label\",\n          children: key\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          className: \"content\",\n          children: /*#__PURE__*/_jsxDEV(ReplaceTextToLink, {\n            text: value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 13\n        }, this)]\n      }, key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 5\n  }, this);\n};\n_c = SingleFeatureTable;\nconst Content = props => {\n  _s();\n  const {\n    selected,\n    setSelected\n  } = props;\n  const closeHandler = useCallback(event => {\n    event.preventDefault();\n    setSelected([]);\n  }, [setSelected]);\n\n  // const catalogItems = Object.fromEntries(selected.map(item => [item.catalog.class, item.catalog]));\n  const groupedFeatures = {};\n  for (const feature of selected) {\n    if (feature.catalog.type !== \"DataItem\") continue;\n    const ary = groupedFeatures[feature.catalog.id] ||= [];\n    ary.push(feature);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sidebar-detail\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"close-btn-container\",\n      children: /*#__PURE__*/_jsxDEV(AiOutlineClose, {\n        className: \"close\",\n        onClick: closeHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), Object.entries(groupedFeatures).map(([id, features]) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar-detail-subsection\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"title\",\n        children: features[0].catalog.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: features.map((feature, idx) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(SingleFeatureTable, {\n            feature: feature\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this), idx < features.length - 1 && /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 46\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 47\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)]\n    }, id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(Content, \"nu5jvn3m5IhVcf0XUx9G1mQmmTU=\");\n_c2 = Content;\nexport default Content;\nvar _c, _c2;\n$RefreshReg$(_c, \"SingleFeatureTable\");\n$RefreshReg$(_c2, \"Content\");","map":{"version":3,"names":["React","useCallback","AiOutlineClose","ReplaceTextToLink","jsxDEV","_jsxDEV","SingleFeatureTable","feature","detailItems","Object","entries","properties","filter","key","_value","startsWith","sort","key1","_value1","key2","_value2","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","value","text","_c","Content","props","_s","selected","setSelected","closeHandler","event","preventDefault","groupedFeatures","catalog","type","ary","id","push","onClick","features","name","idx","Fragment","length","_c2","$RefreshReg$"],"sources":["/home/magari/git/test_smartmap/src/SidebarDetail.tsx"],"sourcesContent":["import React, { useCallback } from 'react';\nimport { AiOutlineClose } from \"react-icons/ai\";\nimport './SidebarDetail.scss'\nimport { CatalogFeature } from './api/catalog';\nimport ReplaceTextToLink from './utils/ReplaceTextToLink';\n\nconst SingleFeatureTable: React.FC<{feature: CatalogFeature}> = ({feature}) => {\n  const detailItems = Object.entries(feature.properties).filter(([key, _value]) => !key.startsWith('_viewer_'));\n\n  detailItems.sort(([key1, _value1], [key2, _value2]) => {\n    // make sure items with key=`class` and key=`subclass` are always on top\n    if (key1 === 'class') return -1;\n    if (key2 === 'class') return 1;\n    if (key1 === 'subclass' && key2 !== 'class') return -1;\n    if (key2 === 'subclass' && key1 !== 'class') return 1;\n\n    return 0;\n  });\n\n  return (\n    <table className='sidebar-detail-single-feature'>\n      <colgroup>\n        <col className='label' />\n        <col className='content' />\n      </colgroup>\n      <tbody>\n        { detailItems.map(([key, value]) => (\n          <tr className=\"sidebar-detail-item\" key={key}>\n            <th className='label'>{key}</th>\n            <td className='content'><ReplaceTextToLink text={value} /></td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n};\n\ntype Props = {\n  selected: CatalogFeature[]\n  setSelected: React.Dispatch<React.SetStateAction<CatalogFeature[]>>\n}\n\nconst Content: React.FC<Props> = (props) => {\n  const { selected, setSelected } = props;\n\n  const closeHandler = useCallback<React.MouseEventHandler>((event) => {\n    event.preventDefault();\n    setSelected([]);\n  }, [setSelected]);\n\n  // const catalogItems = Object.fromEntries(selected.map(item => [item.catalog.class, item.catalog]));\n  const groupedFeatures: { [key: string]: CatalogFeature[] } = {};\n  for (const feature of selected) {\n    if (feature.catalog.type !== \"DataItem\") continue;\n    const ary = groupedFeatures[feature.catalog.id] ||= [];\n    ary.push(feature);\n  }\n\n  return (\n    <div className='sidebar-detail'>\n      <div className='close-btn-container'>\n        <AiOutlineClose className='close' onClick={closeHandler} />\n      </div>\n      { Object.entries(groupedFeatures).map(([id, features]) => (\n        <div key={id} className='sidebar-detail-subsection'>\n          <h2 className='title'>{features[0].catalog.name}</h2>\n          <div>\n            { features.map((feature, idx) => (<React.Fragment key={idx}>\n              <SingleFeatureTable feature={feature} />\n              { idx < features.length - 1 && <hr /> }\n            </React.Fragment>)) }\n          </div>\n        </div>\n      )) }\n    </div>\n  );\n}\n\nexport default Content;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}