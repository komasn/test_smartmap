{"ast":null,"code":"import _slicedToArray from\"/home/magari/git/test_smartmap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import Header from'./Header';import Sidebar from'./Sidebar';import MainMap from'./MainMap';// import type * as maplibregl from 'maplibre-gl';\nimport'./App.scss';import{useQuery}from'react-query';import{getCatalog}from'./api/catalog';import SidebarDetail from'./SidebarDetail';import{useMediaQuery}from'react-responsive';function App(){var catalog=useQuery('catalog',getCatalog);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),selectedLayers=_useState2[0],setSelectedLayers=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedFeatures=_useState4[0],setSelectedFeatures=_useState4[1];// TODO: https://github.com/takamatsu-city/maps.takamatsu-fact.com/issues/89 修正時に 初期値を true に変更する\nvar isDesktop=useMediaQuery({query:'(min-width: 769px)'});var _useState5=useState(isDesktop),_useState6=_slicedToArray(_useState5,2),isOpenedSidebar=_useState6[0],setIsOpenedSidebar=_useState6[1];var catalogSuccess=catalog.isSuccess;var catalogData=catalog.data;useEffect(function(){if(!catalogSuccess||!catalogData){return;}// setSelectedLayers(catalogData.map(item => item.class));\n},[catalogSuccess,catalogData,setSelectedLayers]);// useEffect(() => {\n//   console.log(selectedLayers);\n// }, [selectedLayers]);\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(Sidebar,{catalogData:catalog.data||[],selectedLayers:selectedLayers,isOpenedSidebar:isOpenedSidebar,setIsOpenedSidebar:setIsOpenedSidebar,setSelectedLayers:setSelectedLayers}),/*#__PURE__*/React.createElement(\"div\",{className:\"map-container\"},selectedFeatures.length>0&&/*#__PURE__*/React.createElement(SidebarDetail,{selected:selectedFeatures,setSelected:setSelectedFeatures}),/*#__PURE__*/React.createElement(MainMap,{catalogData:catalog.data||[],selectedLayers:selectedLayers,setSelectedFeatures:setSelectedFeatures}))));}export default App;","map":{"version":3,"names":["useEffect","useState","Header","Sidebar","MainMap","useQuery","getCatalog","SidebarDetail","useMediaQuery","App","catalog","_useState","_useState2","_slicedToArray","selectedLayers","setSelectedLayers","_useState3","_useState4","selectedFeatures","setSelectedFeatures","isDesktop","query","_useState5","_useState6","isOpenedSidebar","setIsOpenedSidebar","catalogSuccess","isSuccess","catalogData","data","React","createElement","className","length","selected","setSelected"],"sources":["/home/magari/git/test_smartmap/src/App.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport Header from './Header'\nimport Sidebar from './Sidebar'\nimport MainMap from './MainMap'\n\n// import type * as maplibregl from 'maplibre-gl';\n\nimport './App.scss';\nimport { useQuery } from 'react-query';\nimport { CatalogFeature, getCatalog } from './api/catalog';\nimport SidebarDetail from './SidebarDetail';\nimport { useMediaQuery } from 'react-responsive'\n\nfunction App() {\n  const catalog = useQuery('catalog', getCatalog);\n  const [selectedLayers, setSelectedLayers] = useState<string[]>([]);\n  const [selectedFeatures, setSelectedFeatures] = useState<CatalogFeature[]>([]);\n\n  // TODO: https://github.com/takamatsu-city/maps.takamatsu-fact.com/issues/89 修正時に 初期値を true に変更する\n  const isDesktop = useMediaQuery({ query: '(min-width: 769px)' })\n  const [isOpenedSidebar, setIsOpenedSidebar] = useState<boolean>(isDesktop);\n\n  const catalogSuccess = catalog.isSuccess;\n  const catalogData = catalog.data;\n  useEffect(() => {\n    if (!catalogSuccess || !catalogData) {\n      return;\n    }\n\n    // setSelectedLayers(catalogData.map(item => item.class));\n  }, [ catalogSuccess, catalogData, setSelectedLayers ]);\n\n  // useEffect(() => {\n  //   console.log(selectedLayers);\n  // }, [selectedLayers]);\n\n  return (\n    <div className=\"App\">\n      <Header />\n      <div className=\"container\">\n        <Sidebar\n          catalogData={catalog.data || []}\n          selectedLayers={selectedLayers}\n          isOpenedSidebar={isOpenedSidebar}\n          setIsOpenedSidebar={setIsOpenedSidebar}\n          setSelectedLayers={setSelectedLayers}\n        />\n        <div className=\"map-container\">\n          { selectedFeatures.length > 0 && <SidebarDetail\n            selected={selectedFeatures}\n            setSelected={setSelectedFeatures}\n          /> }\n          <MainMap\n            catalogData={catalog.data || []}\n            selectedLayers={selectedLayers}\n            setSelectedFeatures={setSelectedFeatures}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"qJAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,MAAO,CAAAC,OAAO,KAAM,WAAW,CAE/B;AAEA,MAAO,YAAY,CACnB,OAASC,QAAQ,KAAQ,aAAa,CACtC,OAAyBC,UAAU,KAAQ,eAAe,CAC1D,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C,OAASC,aAAa,KAAQ,kBAAkB,CAEhD,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,GAAM,CAAAC,OAAO,CAAGL,QAAQ,CAAC,SAAS,CAAEC,UAAU,CAAC,CAC/C,IAAAK,SAAA,CAA4CV,QAAQ,CAAW,EAAE,CAAC,CAAAW,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA3DG,cAAc,CAAAF,UAAA,IAAEG,iBAAiB,CAAAH,UAAA,IACxC,IAAAI,UAAA,CAAgDf,QAAQ,CAAmB,EAAE,CAAC,CAAAgB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAvEE,gBAAgB,CAAAD,UAAA,IAAEE,mBAAmB,CAAAF,UAAA,IAE5C;AACA,GAAM,CAAAG,SAAS,CAAGZ,aAAa,CAAC,CAAEa,KAAK,CAAE,oBAAqB,CAAC,CAAC,CAChE,IAAAC,UAAA,CAA8CrB,QAAQ,CAAUmB,SAAS,CAAC,CAAAG,UAAA,CAAAV,cAAA,CAAAS,UAAA,IAAnEE,eAAe,CAAAD,UAAA,IAAEE,kBAAkB,CAAAF,UAAA,IAE1C,GAAM,CAAAG,cAAc,CAAGhB,OAAO,CAACiB,SAAS,CACxC,GAAM,CAAAC,WAAW,CAAGlB,OAAO,CAACmB,IAAI,CAChC7B,SAAS,CAAC,UAAM,CACd,GAAI,CAAC0B,cAAc,EAAI,CAACE,WAAW,CAAE,CACnC,OACF,CAEA;AACF,CAAC,CAAE,CAAEF,cAAc,CAAEE,WAAW,CAAEb,iBAAiB,CAAE,CAAC,CAEtD;AACA;AACA;AAEA,mBACEe,KAAA,CAAAC,aAAA,QAAKC,SAAS,CAAC,KAAK,eAClBF,KAAA,CAAAC,aAAA,CAAC7B,MAAM,KAAE,CAAC,cACV4B,KAAA,CAAAC,aAAA,QAAKC,SAAS,CAAC,WAAW,eACxBF,KAAA,CAAAC,aAAA,CAAC5B,OAAO,EACNyB,WAAW,CAAElB,OAAO,CAACmB,IAAI,EAAI,EAAG,CAChCf,cAAc,CAAEA,cAAe,CAC/BU,eAAe,CAAEA,eAAgB,CACjCC,kBAAkB,CAAEA,kBAAmB,CACvCV,iBAAiB,CAAEA,iBAAkB,CACtC,CAAC,cACFe,KAAA,CAAAC,aAAA,QAAKC,SAAS,CAAC,eAAe,EAC1Bd,gBAAgB,CAACe,MAAM,CAAG,CAAC,eAAIH,KAAA,CAAAC,aAAA,CAACxB,aAAa,EAC7C2B,QAAQ,CAAEhB,gBAAiB,CAC3BiB,WAAW,CAAEhB,mBAAoB,CAClC,CAAC,cACFW,KAAA,CAAAC,aAAA,CAAC3B,OAAO,EACNwB,WAAW,CAAElB,OAAO,CAACmB,IAAI,EAAI,EAAG,CAChCf,cAAc,CAAEA,cAAe,CAC/BK,mBAAmB,CAAEA,mBAAoB,CAC1C,CACE,CACF,CACF,CAAC,CAEV,CAEA,cAAe,CAAAV,GAAG"},"metadata":{},"sourceType":"module"}